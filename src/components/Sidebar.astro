---
/**
 * Sidebar - Desktop sidebar navigation
 *
 * Fixed sidebar with logo and expanded navigation labels
 * Visible on tablet and desktop screens (>= 640px)
 */
interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const navItems = [
  {
    href: "/dashboard",
    label: "Pulpit",
    icon: "home",
    ariaLabel: "Przejdź do pulpitu",
  },
  {
    href: "/lists/new",
    label: "Nowa lista",
    icon: "plus",
    ariaLabel: "Stwórz nową listę",
  },
  {
    href: "/profile",
    label: "Profil",
    icon: "user",
    ariaLabel: "Przejdź do profilu",
  },
];

const isActive = (href: string) => {
  if (href === "/dashboard") {
    return currentPath === "/" || currentPath === "/dashboard";
  }
  return currentPath.startsWith(href);
};
---

<aside class="sticky top-14 h-[calc(100vh-3.5rem)] w-60 border-r bg-sidebar" aria-label="Nawigacja główna">
  <div class="flex h-full flex-col gap-2 p-4">
    <!-- Logo -->
    <div class="mb-4 px-2">
      <a href="/dashboard" class="flex items-center space-x-2">
        <span class="text-xl font-bold">Memo</span>
      </a>
    </div>

    <!-- Navigation Items -->
    <nav class="flex flex-col gap-1">
      {
        navItems.map((item) => (
          <a
            href={item.href}
            class:list={[
              "flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",
              isActive(item.href)
                ? "bg-sidebar-accent text-sidebar-accent-foreground"
                : "text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
            ]}
            aria-label={item.ariaLabel}
            aria-current={isActive(item.href) ? "page" : undefined}
          >
            {item.icon === "home" && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                <polyline points="9 22 9 12 15 12 15 22" />
              </svg>
            )}
            {item.icon === "plus" && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <circle cx="12" cy="12" r="10" />
                <path d="M12 8v8" />
                <path d="M8 12h8" />
              </svg>
            )}
            {item.icon === "user" && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
              </svg>
            )}
            <span>{item.label}</span>
          </a>
        ))
      }
    </nav>
  </div>
</aside>

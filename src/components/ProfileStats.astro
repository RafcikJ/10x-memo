---
/**
 * ProfileStats - User statistics display
 *
 * Features:
 * - AI usage statistics (daily, total)
 * - Account creation date
 * - Activity summary
 */

interface Props {
  totalLists: number;
  totalTests: number;
  aiGenerationsUsed: number;
  aiGenerationsLimit: number;
  accountCreatedAt: string;
}

const { totalLists, totalTests, aiGenerationsUsed, aiGenerationsLimit, accountCreatedAt } = Astro.props;

// Format date
const formatDate = (date: string) => {
  const d = new Date(date);
  return d.toLocaleDateString("pl-PL", { day: "numeric", month: "long", year: "numeric" });
};

const accountAge = formatDate(accountCreatedAt);
---

<div class="space-y-6">
  <div>
    <h2 class="text-lg font-semibold">Statystyki użycia</h2>
    <p class="text-sm text-muted-foreground">Twoja aktywność w aplikacji</p>
  </div>

  <!-- Stats Grid -->
  <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
    <!-- Total Lists -->
    <div class="rounded-lg border bg-card p-4">
      <div class="flex items-center gap-3">
        <div class="rounded-lg bg-primary/10 p-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="text-primary"
          >
            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
          </svg>
        </div>
        <div>
          <div class="text-2xl font-bold">{totalLists}</div>
          <div class="text-xs text-muted-foreground">
            {totalLists === 1 ? "Lista" : totalLists < 5 ? "Listy" : "List"}
          </div>
        </div>
      </div>
    </div>

    <!-- Total Tests -->
    <div class="rounded-lg border bg-card p-4">
      <div class="flex items-center gap-3">
        <div class="rounded-lg bg-green-500/10 p-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="text-green-600 dark:text-green-400"
          >
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
        </div>
        <div>
          <div class="text-2xl font-bold">{totalTests}</div>
          <div class="text-xs text-muted-foreground">
            {totalTests === 1 ? "Test" : totalTests < 5 ? "Testy" : "Testów"}
          </div>
        </div>
      </div>
    </div>

    <!-- AI Usage Today -->
    <div class="rounded-lg border bg-card p-4">
      <div class="flex items-center gap-3">
        <div class="rounded-lg bg-purple-500/10 p-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="text-purple-600 dark:text-purple-400"
          >
            <path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"></path>
            <path d="M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"></path>
            <path d="M12 2v2"></path>
            <path d="M12 22v-2"></path>
          </svg>
        </div>
        <div>
          <div class="text-2xl font-bold">
            {aiGenerationsUsed}/{aiGenerationsLimit}
          </div>
          <div class="text-xs text-muted-foreground">AI dziś</div>
        </div>
      </div>
    </div>

    <!-- Account Age -->
    <div class="rounded-lg border bg-card p-4">
      <div class="flex items-center gap-3">
        <div class="rounded-lg bg-blue-500/10 p-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="text-blue-600 dark:text-blue-400"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <div>
          <div class="text-sm font-semibold">Od {accountAge}</div>
          <div class="text-xs text-muted-foreground">Członek</div>
        </div>
      </div>
    </div>
  </div>
</div>
